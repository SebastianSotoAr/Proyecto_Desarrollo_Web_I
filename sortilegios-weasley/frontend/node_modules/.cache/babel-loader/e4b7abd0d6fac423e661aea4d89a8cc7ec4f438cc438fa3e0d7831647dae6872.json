{"ast":null,"code":"var _jsxFileName = \"/home/straeker/Documentos/GitHub/Proyecto_Desarrollo_Web_I/sortilegios-weasley/frontend/src/pages/UserPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { AuthContext } from \"../components/auth\";\nimport axios from \"axios\";\nimport \"../styles/UserPage.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserPage = () => {\n  _s();\n  const {\n    user,\n    setUser,\n    logout\n  } = useContext(AuthContext);\n  const [form, setForm] = useState({\n    username: \"\",\n    password: \"\",\n    currentPassword: \"\"\n  });\n  const [magicAnswer, setMagicAnswer] = useState(\"\");\n  const [orderHistory, setOrderHistory] = useState([]);\n  const [allUsers, setAllUsers] = useState([]); // solo admin\n\n  useEffect(() => {\n    if (user) {\n      setForm({\n        name: user.name || \"\",\n        password: \"\",\n        currentPassword: \"\"\n      });\n      fetchOrders();\n      if (user.rol === \"admin\") fetchAllUsers();\n    }\n  }, [user, user.name]);\n  const fetchOrders = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const res = await axios.get(\"http://localhost:5000/api/orders/my\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setOrderHistory(res.data);\n    } catch (err) {\n      console.error(\"Error al obtener pedidos:\", err);\n    }\n  };\n  const fetchAllUsers = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const res = await axios.get(\"http://localhost:5000/api/users\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setAllUsers(res.data);\n    } catch (err) {\n      console.error(\"Error al obtener usuarios:\", err);\n    }\n  };\n  const handleProfileUpdate = async () => {\n    const wantsToChangePassword = form.password.trim() !== \"\";\n    if (wantsToChangePassword && !form.currentPassword.trim()) {\n      return alert(\"Debes ingresar tu contraseña actual para cambiarla.\");\n    }\n    try {\n      const token = localStorage.getItem(\"token\");\n      const payload = {\n        username: form.username\n      };\n      if (wantsToChangePassword) {\n        payload.password = form.password;\n        payload.currentPassword = form.currentPassword;\n      }\n      const res = await axios.put(\"http://localhost:5000/api/users/me\", payload, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setUser(res.data);\n      alert(\"Perfil actualizado 🪄\");\n\n      // Limpiar campos de contraseña después del guardado\n      setForm(prev => ({\n        ...prev,\n        password: \"\",\n        currentPassword: \"\"\n      }));\n    } catch (err) {\n      var _err$response, _err$response2, _err$response2$data;\n      console.error(\"Error actualizando perfil:\", ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || err);\n      alert(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || \"Error actualizando perfil\");\n    }\n  };\n  const handleAddFunds = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      if (!magicAnswer.trim()) {\n        alert(\"Debes escribir un hechizo para recargar ✨\");\n        return;\n      }\n      const res = await axios.post(\"http://localhost:5000/api/users/recharge\", {\n        answer: magicAnswer\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      console.log(\"Respuesta exitosa:\", res);\n      setUser(prev => ({\n        ...prev,\n        money: res.data.money\n      }));\n      alert(\"¡Recarga mágica exitosa! ✨\");\n    } catch (err) {\n      var _err$response3, _err$response3$data, _err$response4;\n      const message = ((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.error) || \"Respuesta incorrecta. Intenta con otro hechizo...\";\n      alert(message);\n      console.error(\"Error al recargar:\", ((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : _err$response4.data) || err);\n    }\n  };\n  const handleRoleChange = async (userId, newRole) => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      await axios.put(`http://localhost:5000/api/users/${userId}/role`, {\n        rol: newRole\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      fetchAllUsers();\n      alert(\"Rol actualizado 🧙‍♂️\");\n    } catch (err) {\n      console.error(\"Error actualizando rol:\", err);\n    }\n  };\n  if (!user) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Cargando...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Perfil de \", user.username]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"profile-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"label\",\n            children: \"Usuario:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 16\n          }, this), \" \", user.username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"magic-input\",\n          type: \"text\",\n          placeholder: \"Nuevo nombre\",\n          value: form.username,\n          onChange: e => setForm({\n            ...form,\n            username: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"magic-input\",\n          type: \"password\",\n          placeholder: \"Nueva contrase\\xF1a (opcional)\",\n          value: form.password,\n          onChange: e => setForm({\n            ...form,\n            password: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"magic-input\",\n          type: \"password\",\n          placeholder: \"Contrase\\xF1a actual (requerida)\",\n          value: form.currentPassword,\n          onChange: e => setForm({\n            ...form,\n            currentPassword: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"magic-button\",\n          onClick: handleProfileUpdate,\n          children: \"Guardar cambios\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"profile-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"label\",\n            children: \"Recarga m\\xE1gica \\uD83E\\uDE99\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 16\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\xBFQu\\xE9 hechizo repele a los dementores?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"magic-input\",\n          type: \"text\",\n          value: magicAnswer,\n          onChange: e => setMagicAnswer(e.target.value),\n          placeholder: \"Escribe tu hechizo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"magic-button\",\n          onClick: handleAddFunds,\n          children: \"Recargar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"profile-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Historial de pedidos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 13\n        }, this), orderHistory.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No hay pedidos todav\\xEDa.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: orderHistory.map(order => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"Pedido #\", order._id.slice(-5), \" \\u2013 Total: \", order.total, \" Galeones\"]\n          }, order._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this), user.rol === \"admin\" && /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"profile-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Administrar usuarios\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 13\n        }, this), allUsers.map(u => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [u.name, \" (\", u.username, \") - Rol:\", \" \", /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"magic-input\",\n            value: u.rol,\n            onChange: e => handleRoleChange(u._id, e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"admin\",\n              children: \"admin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"usuario_magico\",\n              children: \"usuario_magico\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"usuario_muggle\",\n              children: \"usuario_muggle\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"invitado\",\n              children: \"invitado\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 17\n          }, this)]\n        }, u._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 17\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"magic-aura\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 5\n  }, this);\n};\n_s(UserPage, \"JS5N8QaCuQ3miBElXQuBsgDpKb0=\");\n_c = UserPage;\nexport default UserPage;\nvar _c;\n$RefreshReg$(_c, \"UserPage\");","map":{"version":3,"names":["React","useContext","useEffect","useState","AuthContext","axios","jsxDEV","_jsxDEV","UserPage","_s","user","setUser","logout","form","setForm","username","password","currentPassword","magicAnswer","setMagicAnswer","orderHistory","setOrderHistory","allUsers","setAllUsers","name","fetchOrders","rol","fetchAllUsers","token","localStorage","getItem","res","get","headers","Authorization","data","err","console","error","handleProfileUpdate","wantsToChangePassword","trim","alert","payload","put","prev","_err$response","_err$response2","_err$response2$data","response","handleAddFunds","post","answer","log","money","_err$response3","_err$response3$data","_err$response4","message","handleRoleChange","userId","newRole","children","fileName","_jsxFileName","lineNumber","columnNumber","className","type","placeholder","value","onChange","e","target","onClick","length","map","order","_id","slice","total","u","_c","$RefreshReg$"],"sources":["/home/straeker/Documentos/GitHub/Proyecto_Desarrollo_Web_I/sortilegios-weasley/frontend/src/pages/UserPage.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport { AuthContext } from \"../components/auth\";\nimport axios from \"axios\";\nimport \"../styles/UserPage.css\";\n\nconst UserPage = () => {\n  const { user, setUser, logout } = useContext(AuthContext);\n  const [form, setForm] = useState({ username: \"\", password: \"\", currentPassword: \"\" });\n  const [magicAnswer, setMagicAnswer] = useState(\"\");\n  const [orderHistory, setOrderHistory] = useState([]);\n  const [allUsers, setAllUsers] = useState([]); // solo admin\n\n  useEffect(() => {\n  if (user) {\n    setForm({ name: user.name || \"\", password: \"\", currentPassword: \"\" });\n    fetchOrders();\n    if (user.rol === \"admin\") fetchAllUsers();\n  }\n}, [user, user.name]);\n\n\n  const fetchOrders = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const res = await axios.get(\"http://localhost:5000/api/orders/my\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      setOrderHistory(res.data);\n    } catch (err) {\n      console.error(\"Error al obtener pedidos:\", err);\n    }\n  };\n\n  const fetchAllUsers = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const res = await axios.get(\"http://localhost:5000/api/users\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      setAllUsers(res.data);\n    } catch (err) {\n      console.error(\"Error al obtener usuarios:\", err);\n    }\n  };\n\n  const handleProfileUpdate = async () => {\n  const wantsToChangePassword = form.password.trim() !== \"\";\n\n  if (wantsToChangePassword && !form.currentPassword.trim()) {\n    return alert(\"Debes ingresar tu contraseña actual para cambiarla.\");\n  }\n\n  try {\n    const token = localStorage.getItem(\"token\");\n\n    const payload = { username: form.username };\n    if (wantsToChangePassword) {\n      payload.password = form.password;\n      payload.currentPassword = form.currentPassword;\n    }\n\n    const res = await axios.put(\n      \"http://localhost:5000/api/users/me\",\n      payload,\n      {\n        headers: { Authorization: `Bearer ${token}` },\n      }\n    );\n\n    setUser(res.data);\n    alert(\"Perfil actualizado 🪄\");\n\n    // Limpiar campos de contraseña después del guardado\n    setForm((prev) => ({\n      ...prev,\n      password: \"\",\n      currentPassword: \"\",\n    }));\n  } catch (err) {\n    console.error(\"Error actualizando perfil:\", err.response?.data || err);\n    alert(err.response?.data?.error || \"Error actualizando perfil\");\n  }\n};\n\n const handleAddFunds = async () => {\n  try {\n    const token = localStorage.getItem(\"token\");\n    if (!magicAnswer.trim()) {\n  alert(\"Debes escribir un hechizo para recargar ✨\");\n  return;\n}\n\n    const res = await axios.post(\n      \"http://localhost:5000/api/users/recharge\",\n      { answer: magicAnswer },\n      { headers: { Authorization: `Bearer ${token}` } }\n    );\n\n    console.log(\"Respuesta exitosa:\", res);\n\n    setUser((prev) => ({ ...prev, money: res.data.money }));\n    alert(\"¡Recarga mágica exitosa! ✨\");\n  } catch (err) {\n    const message =\n      err.response?.data?.error || \"Respuesta incorrecta. Intenta con otro hechizo...\";\n    alert(message);\n    console.error(\"Error al recargar:\", err.response?.data || err);\n  }\n};\n\n\n\n  const handleRoleChange = async (userId, newRole) => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      await axios.put(\n        `http://localhost:5000/api/users/${userId}/role`,\n        { rol: newRole },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      fetchAllUsers();\n      alert(\"Rol actualizado 🧙‍♂️\");\n    } catch (err) {\n      console.error(\"Error actualizando rol:\", err);\n    }\n  };\n\n  if (!user) return <p>Cargando...</p>;\n\n  return (\n    <div className=\"profile-page\">\n        <div className=\"profile-card\">\n        <h2>Perfil de {user.username}</h2>\n\n        <section className=\"profile-info\">\n            <p><span className=\"label\">Usuario:</span> {user.username}</p>\n            <input\n            className=\"magic-input\"\n            type=\"text\"\n            placeholder=\"Nuevo nombre\"\n            value={form.username}\n            onChange={(e) => setForm({ ...form, username: e.target.value })}\n            />\n            <input\n            className=\"magic-input\"\n            type=\"password\"\n            placeholder=\"Nueva contraseña (opcional)\"\n            value={form.password}\n            onChange={(e) => setForm({ ...form, password: e.target.value })}\n            />\n            <input\n            className=\"magic-input\"\n            type=\"password\"\n            placeholder=\"Contraseña actual (requerida)\"\n            value={form.currentPassword}\n            onChange={(e) => setForm({ ...form, currentPassword: e.target.value })}\n            />\n            <button className=\"magic-button\" onClick={handleProfileUpdate}>Guardar cambios</button>\n        </section>\n\n        <section className=\"profile-info\">\n            <p><span className=\"label\">Recarga mágica 🪙</span></p>\n            <p>¿Qué hechizo repele a los dementores?</p>\n            <input\n            className=\"magic-input\"\n            type=\"text\"\n            value={magicAnswer}\n            onChange={(e) => setMagicAnswer(e.target.value)}\n            placeholder=\"Escribe tu hechizo\"\n            />\n            <button className=\"magic-button\" onClick={handleAddFunds}>Recargar</button>\n        </section>\n\n        <section className=\"profile-info\">\n            <h3>Historial de pedidos</h3>\n            {orderHistory.length === 0 ? (\n            <p>No hay pedidos todavía.</p>\n            ) : (\n            <ul>\n                {orderHistory.map((order) => (\n                <li key={order._id}>\n                    Pedido #{order._id.slice(-5)} – Total: {order.total} Galeones\n                </li>\n                ))}\n            </ul>\n            )}\n        </section>\n\n        {user.rol === \"admin\" && (\n            <section className=\"profile-info\">\n            <h3>Administrar usuarios</h3>\n            {allUsers.map((u) => (\n                <div key={u._id}>\n                {u.name} ({u.username}) - Rol:{\" \"}\n                <select\n                    className=\"magic-input\"\n                    value={u.rol}\n                    onChange={(e) => handleRoleChange(u._id, e.target.value)}\n                >\n                    <option value=\"admin\">admin</option>\n                    <option value=\"usuario_magico\">usuario_magico</option>\n                    <option value=\"usuario_muggle\">usuario_muggle</option>\n                    <option value=\"invitado\">invitado</option>\n                </select>\n                </div>\n            ))}\n            </section>\n        )}\n        </div>\n        <div className=\"magic-aura\"></div>\n    </div>\n    );\n\n};\n\nexport default UserPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}